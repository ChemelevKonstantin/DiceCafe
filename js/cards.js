const REALM_CARDS = {
    '–ö–∞–≤\'—è—Ä–Ω—è —Ä–∞–Ω–∫–æ–≤–∏—Ö –º–µ—Ç—Ä–≤—è–∫—ñ–≤': {
        quests: [
            {
                id: 1,
                title: "–†–∞–Ω–æ–∫ –º–µ—Ä—Ç–≤–∏—Ö –∫–∞–≤–æ–º–∞–Ω—ñ–≤",
                illustration: "images/r1_1.png",
                text: "‚ò£Ô∏è–†–∞–Ω–∫–æ–≤—ñ –∑–æ–º–±—ñ –∫—Ä–∏—á–∞—Ç—å —â–æ –≤–æ–Ω–∏ –ª–∞–∫—Ç–æ–∑–æ-–Ω–µ–ø–µ—Ä–µ–Ω–æ—Å–∏–º—ñ —ñ –∫–∏–¥–∞—é—Ç—å—Å—è –Ω–∞ —Ç–µ–±–µ. –û–∫—Ä–æ–ø–∏ —ó—Ö –º—ñ—Ü–Ω—è—á–∏–º –§—ñ–ª—å—Ç—Ä–æ–º.",
                conditions: {
                    success: { 
                        threshold: 11, 
                        effects: [
                            { type: "health", value: 1, text: "+1‚ù§Ô∏è" },
                            { type: "luck", value: 1, text: "+1‚òòÔ∏è" }
                        ],
                        text: "+1‚ù§Ô∏è +1‚òòÔ∏è"
                    },
                    failure: { 
                        threshold: 9, 
                        effects: [
                            { type: "luck", value: -1, text: "-1‚òòÔ∏è" },
                            { type: "health", value: -1, text: "-1‚ù§Ô∏è" }
                        ],
                        text: "-1‚òòÔ∏è -1‚ù§Ô∏è"
                    },
                    special: { 
                        condition: "pair",
                        effects: [
                            { type: "gold", value: 1, text: "+1ü™ô" }
                        ],
                        text: "–ü–∞—Ä–∞ +1ü™ô"
                    }
                }
            },
            {
                id: 2,
                title: "–ú–∞–ª–µ–Ω—å–∫–∏–π –ë—Ä–æ",
                illustration: "images/r1_2.png",
                text: "–ü–æ–∫–∏ –ø–æ—á—É–≤–∞–π —Å–µ–±–µ —Å–∏–ª—å–Ω–∏–º, –∞–ª–µ —è–∫—â–æ –∑—É—Å—Ç—Ä—ñ–Ω–µ—à –π–æ–≥–æ —Å—Ç–∞—Ä—à–æ–≥–æ –ë—Ä–æ, —Ç–æ —Ç–µ–±–µ –±—É–¥—É—Ç—å –≤—ñ–¥—à–∫—Ä–µ–±–∞—Ç–∏ —è–∫ –ø—ñ–¥—Å—Ç—ñ–ª—å–Ω—É –∂—É–π–∫—É.",
                conditions: {
                    success: { 
                        threshold: 9, 
                        effects: [
                            { type: "gold", value: 2, text: "+2ü™ô" },
                            { type: "luck", value: 1, text: "+1‚òòÔ∏è" }
                        ],
                        text: "+2ü™ô +1‚òòÔ∏è"
                    },
                    failure: { 
                        threshold: 8, 
                        effects: [
                            { type: "health", value: -1, text: "-1‚ù§Ô∏è" },
                            { type: "gold", value: -1, text: "-1ü™ô" }
                        ],
                        text: "-1‚ù§Ô∏è -1ü™ô"
                    },
                    special: {
                        condition: "allEven",
                        effects: [
                            { type: "luck", value: 1, text: "+1‚òòÔ∏è" }
                        ],
                        text: "–í—Å—ñ —á–æ—Ç–Ω—ñ +1‚òòÔ∏è"
                    }
                }
            },
            {
                id: 3,
                title: "–ú–∞–≥—ñ—á–Ω–∞ –ö–∞–≤–æ–≤–∞ –§–∞—Å–æ–ª–∏–Ω–∞ü•ú",
                illustration: "images/r1_3.png",
                text: "–¢–∏ —Ç—ñ–ª—å–∫–∏ –ø–æ–¥–∏–≤–∏—Å—å –Ω–∞ —Ü—ñ –ø–æ–ª–æ–≤–∏–Ω–∫–∏ (‚Äø‚à£‚Äø)ü§§... —Ö–æ—á–µ—à –¥—ñ–∑–Ω–∞—Ç–∏—Å—å —ó—Ö —Å–µ–∫—Ä–µ—Ç–Ω—ñ —Ä–µ—Ü–µ–ø—Ç–∏üòâ?",
                conditions: {
                    success: { 
                        threshold: 10, 
                        effects: [
                            { type: "luck", value: 1, text: "+1‚òòÔ∏è" },
                            { type: "gold", value: 1, text: "+1ü™ô" }
                        ],
                        text: "+1‚òòÔ∏è +1ü™ô"
                    },
                    failure: { 
                        threshold: 7, 
                        effects: [
                            { type: "health", value: -2, text: "-2‚ù§Ô∏è" },
                            { type: "luck", value: -2, text: "-2‚òòÔ∏è" }
                        ],
                        text: "-2‚ù§Ô∏è -2‚òòÔ∏è"
                    },
                    special: {
                        condition: "sequence",
                        effects: [
                            { type: "gold", value: 2, text: "+2ü™ô" },
                            { type: "health", value: 1, text: "+1‚ù§Ô∏è" }
                        ],
                        text: "–°—Ç—Ä—ñ—Ç +2ü™ô +1‚ù§Ô∏è"
                    }
                }
            },
            {
                id: 4,
                title: "–ü—Ä–∏–≤—ñ–¥–∏ –ö–∞–≤–æ–º–∞–Ω—ñ–≤",
                illustration: "images/r1_4.png",
                text: "–í–æ–Ω–∏ —Ç–µ–±–µ –Ω–∞–ª—è–∫–∞—é—Ç—å —ñ –∑'—ó–¥—è—Ç—å —Ç–≤—ñ–π –º–∞–∫–∞—Ä–æ–Ω. –ù–∞–≤–∞–ª—è–π —ó–º –ø–æ —Å–∞–º–µ –ø–æ—Ç–æ–π–±—ñ—á—á—è.",
                conditions: {
                    success: { 
                        threshold: 11, 
                        effects: [
                            { type: "gold", value: 1, text: "+1ü™ô" },
                            { type: "luck", value: 1, text: "+1‚òòÔ∏è" }
                        ],
                        text: "+1ü™ô +1‚òòÔ∏è"
                    },
                    failure: { 
                        threshold: 7, 
                        effects: [
                            { type: "luck", value: -1, text: "-1‚òòÔ∏è" },
                            { type: "health", value: -1, text: "-1‚ù§Ô∏è" }
                        ],
                        text: "-1‚òòÔ∏è -1‚ù§Ô∏è"
                    },
                    special: {
                        condition: "triple",
                        effects: [
                            { type: "health", value: 1, text: "+2‚ù§Ô∏è" },
                            { type: "luck", value: 2, text: "+2‚òòÔ∏è" }
                        ],
                        text: "–¢—Ä—ñ–π–∫–∞ +2‚ù§Ô∏è +2‚òòÔ∏è"
                    }
                }
            },
            {
                id: 5,
                title: "–¢–∏ –º–æ–∂–µ—à –±–∞—á–∏—Ç–∏ –º–∞–π–±—É—Ç–Ω–µ!",
                illustration: "images/r1_5.png",
                text: "...–º–æ–∂–µ—à –ø–µ—Ä–µ–¥–±–∞—á–∏—Ç–∏, —Ö—Ç–æ –∑–∞–º–æ–≤–∏—Ç—å –ª–∞—Ç–µ. –ê–ª–µ –Ω–∞ —Ç–µ–±–µ –ø–æ–ª—é—î –ß–∞—Å–æ–≤–∞ –ø–æ–ª—ñ—Ü—ñ—è, –∞ —â–µ –¥–µ–Ω—å –Ω–µ –∑–∞–¥–∞–≤—Å—è –∑ –ø–æ—á–∞—Ç–∫–æ–º ‚ò£Ô∏è –∑–æ–º–±—ñ –∞–ø–æ–∫–∞–ª—ñ–ø—Å—ñ—Å—É.",
                conditions: {
                    success: { 
                        threshold: 12, 
                        effects: [
                            { type: "luck", value: 1, text: "+1‚òòÔ∏è" },
                            { type: "gold", value: 1, text: "+1ü™ô" }
                        ],
                        text: "+1‚òòÔ∏è +1ü™ô"
                    },
                    failure: { 
                        threshold: 10, 
                        effects: [
                            { type: "gold", value: -1, text: "-1ü™ô" },
                            { type: "health", value: -1, text: "-1‚ù§Ô∏è" }
                        ],
                        text: "-1ü™ô -1‚ù§Ô∏è"
                    },
                    special: {
                        condition: "isSumEven",
                        effects: [
                            { type: "health", value: 1, text: "+1‚ù§Ô∏è" }
                        ],
                        text: "–¶—ñ–ª–µ +1‚ù§Ô∏è"
                    }
                }
            },
            {
                id: 6,
                title: "–í—ñ–¥—å–º–∞ –∑ –ø–æ—Ç–æ–π–±—ñ—á—á—è —á–∏ –ù–∞–ø—ñ–≤–¥–æ—Ö–ª–∏–π –ö—ñ—Ç –®—Ä—å–æ–¥—ñ–Ω–≥–µ—Ä–∞",
                illustration: "images/r1_6.png",
                text: "–í—ñ–¥—å–º–∞ –ø—Ä–∏–Ω–µ—Å–ª–∞ –≤ –∫–∞—Ñ–µ –¥–æ—Ö–ª–æ–≥–æ –∫–æ—Ç–∞ —ñ –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –π–æ–≥–æ –æ–∂–∏–≤–∏—Ç–∏. –ó—Ä–æ–±–∏—à –∫–æ—Ç—É —à—Ç—É—á–Ω–µ –¥–∏—Ö–∞–Ω–Ω—è, —Ç–æ –≤—ñ–¥—å–º–∞ –ø–æ–¥–∞—Ä—É—î —Ç–æ–±—ñüíã, —Ç–∞ –π –∫—ñ—Ç –ø–æ–¥—ñ–ª–∏—Ç—å—Å—è –æ–¥–Ω–∏–º –∑ –¥–µ–≤\'—è—Ç–∏ ‚ù§Ô∏è... –ê–±–∏ —Ç—ñ–ª—å–∫–∏ –Ω–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –±—ñ–ª—å—à–µ –ó–ª–æüëø",
                conditions: {
                    success: { 
                        threshold: 13, 
                        effects: [
                            { type: "health", value: 2, text: "+2‚ù§Ô∏è" }
                        ],
                        text: "+2‚ù§Ô∏è"
                    },
                    failure: { 
                        threshold: 9, 
                        effects: [
                            { type: "health", value: -1, text: "-1‚ù§Ô∏è" },
                            { type: "luck", value: -1, text: "-1‚òòÔ∏è" }
                        ],
                        text: "-1‚ù§Ô∏è -1‚òòÔ∏è"
                    },
                    special: {
                        condition: "isSumEven",
                        effects: [
                            { type: "health", value: 1, text: "+1‚ù§Ô∏è" }
                        ],
                        text: "–¶—ñ–ª–µ +1‚ù§Ô∏è"
                    }
                }
            }
        ],
        bosses: [
            {
                id: "boss1",
                title: "üíÄ–ë—ñ—Ü–µ–ø—Å –ë—Ä–æüíÄ",
                illustration: "images/r1_boss1.png",
                text: "–°–∫—Ä—É—Ç–∏—Ç—å —Ç–µ–±–µ –≤ –±–ª–µ–Ω–¥–µ—Ä –∑–∞ —Å–µ–∫—É–Ω–¥—É",
                conditions: {
                    success: { 
                        threshold: 16, 
                        effects: [
                            { type: "health", value: 2, text: "+2‚ù§Ô∏è" },
                            { type: "gold", value: 2, text: "+2ü™ô" },
                            { type: "luck", value: 2, text: "+2‚òòÔ∏è" }
                        ],
                        text: "+2‚ù§Ô∏è +2ü™ô +2‚òòÔ∏è"
                    },
                    failure: { 
                        threshold: 14, 
                        effects: [
                            { type: "health", value: -3, text: "-3‚ù§Ô∏è" },
                            { type: "luck", value: -2, text: "-2‚òòÔ∏è" }
                        ],
                        text: "-3‚ù§Ô∏è -2‚òòÔ∏è"
                    },
                    special: {
                        condition: "triple",
                        effects: [
                            { type: "health", value: 2, text: "+2‚ù§Ô∏è" },
                            { type: "gold", value: 1, text: "+1ü™ô" },
                            { type: "luck", value: 2, text: "+2‚òòÔ∏è" }
                        ],
                        text: "–¢—Ä—ñ–π–∫–∞ +2‚ù§Ô∏è +1ü™ô +2‚òòÔ∏è"
                    }
                }
            },
            {
                id: "boss2",
                title: "üíÄ–í–µ–ª–∏–∫–∏–π –ë—Ä–æüíÄ",
                illustration: "images/r1_boss2.png",
                text: "–ü—Ä–æ–≥—Ä–∞—î—à ‚Äî —ñ —Å—Ç–∞–Ω–µ—à —Å—Ç–∏–ª—å–Ω–∏–º –∫–∏–ª–∏–º–∫–æ–º –±—ñ–ª—è –ø–æ—Ä–æ–≥—É",
                conditions: {
                    success: { 
                        threshold: 17, 
                        effects: [
                            { type: "gold", value: 3, text: "+3ü™ô" },
                            { type: "health", value: 2, text: "+2‚ù§Ô∏è" }
                        ],
                        text: "+3ü™ô +2‚ù§Ô∏è"
                    },
                    failure: { 
                        threshold: 14, 
                        effects: [
                            { type: "health", value: -3, text: "-3‚ù§Ô∏è" },
                            { type: "gold", value: -2, text: "-2ü™ô" }
                        ],
                        text: "-3‚ù§Ô∏è -2ü™ô"
                    },
                    special: {
                        condition: "sequence",
                        effects: [
                            { type: "health", value: 2, text: "+2‚ù§Ô∏è" }
                        ],
                        text: "–°—Ç—Ä—ñ—Ç +2‚ù§Ô∏è"
                    }
                }
            }
        ]
    },
    '–ó–æ–≤ —á–æ—Ä–Ω–æ—ó –±–µ–∑–æ–¥–Ω—ñ': {
        quests: [
            {
                id: 1,
                title: "r2_1",
                illustration: "images/r2_1.png",
                text: "–î—É—Ö —á–∞—é –∫–∏–¥–∞—î –≤–∏–∫–ª–∏–∫: –∑—Ä–æ–±–∏ —á–∞–π –∑–∞–º—ñ—Å—Ç—å –∫–∞–≤–∏, –∞–±–æ —Ç–µ–±–µ –±—É–¥—É—Ç—å –Ω–∞–∑–∏–≤–∞—Ç–∏ –≤ —É—Å—å–æ–º—É –ß–∞–π–Ω–∏–∫–æ–º!",
                conditions: {
                    success: { 
                        threshold: 13, 
                        effects: [
                            { type: "luck", value: 1, text: "+1‚òòÔ∏è" },
                            { type: "gold", value: 1, text: "+1ü™ô" }
                        ],
                        text: "+1‚òòÔ∏è +1ü™ô"
                    },
                    failure: { 
                        threshold: 10, 
                        effects: [
                            { type: "health", value: -1, text: "-1‚ù§Ô∏è" },
                            { type: "luck", value: -1, text: "-1‚òòÔ∏è" }
                        ],
                        text: "-1‚ù§Ô∏è -1‚òòÔ∏è"
                    },
                    special: { 
                        condition: "allEven",
                        effects: [
                            { type: "gold", value: 2, text: "+2ü™ô" }
                        ],
                        text: "All even numbers +2ü™ô"
                    }
                }
            },
            {
                id: 2,
                title: "r2_2",
                illustration: "images/r2_2.png",
                text: "–í—ñ–Ω –∑–±–∏—Ä–∞—î—Ç—å—Å—è –≤–æ—Å–∫—Ä–µ—Å–∏—Ç–∏ —Ç–≤–æ—ó—Ö –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç—ñ–≤, –∞ –ø–æ—Ç—ñ–º –∑–≤–∞—Ä–∏—Ç–∏ –¢–µ–±–µ –∑–∞ –Ω–µ–¥–æ–ª–∏—Ç—É –∫–∞–≤—É!",
                conditions: {
                    success: { 
                        threshold: 14, 
                        effects: [
                            { type: "gold", value: 2, text: "+2ü™ô" },
                            { type: "luck", value: 1, text: "+1‚òòÔ∏è" }
                        ],
                        text: "+2ü™ô +1‚òòÔ∏è"
                    },
                    failure: { 
                        threshold: 11, 
                        effects: [
                            { type: "health", value: -1, text: "-1‚ù§Ô∏è" },
                            { type: "gold", value: -1, text: "-1ü™ô" }
                        ],
                        text: "-1‚ù§Ô∏è -1ü™ô"
                    },
                    special: {
                        condition: "allEven",
                        effects: [
                            { type: "luck", value: 1, text: "+1‚òòÔ∏è" }
                        ],
                        text: "All even numbers +1‚òòÔ∏è"
                    }
                }
            },
            {
                id: 3,
                title: "r2_3 –ö–∞—Ä—Ç–∫–æ–≤–∞ –ë—ñ–π–∫–∞",
                illustration: "images/r2_3.png",
                text: "—Ç–µ–∫—Å—Ç",
                conditions: {
                    success: { 
                        threshold: 13, 
                        effects: [
                            { type: "luck", value: 2, text: "+2‚òòÔ∏è" },
                            { type: "health", value: 1, text: "+1‚ù§Ô∏è" }
                        ],
                        text: "+2‚òòÔ∏è +1‚ù§Ô∏è"
                    },
                    failure: { 
                        threshold: 12, 
                        effects: [
                            { type: "health", value: -2, text: "-2‚ù§Ô∏è" },
                            { type: "luck", value: -1, text: "-1‚òòÔ∏è" }
                        ],
                        text: "-2‚ù§Ô∏è -1‚òòÔ∏è"
                    },
                    special: {
                        condition: "sequence",
                        effects: [
                            { type: "gold", value: 2, text: "+2ü™ô" },
                            { type: "health", value: 1, text: "+1‚ù§Ô∏è" }
                        ],
                        text: "Get a sequence +2ü™ô and +1‚ù§Ô∏è"
                    }
                }
            },
            {
                id: 4,
                title: "r2_4",
                illustration: "images/r2_4.png",
                text: "—Ç–µ–∫—Å—Ç",
                conditions: {
                    success: { 
                        threshold: 12, 
                        effects: [
                            { type: "gold", value: 1, text: "+1ü™ô" },
                            { type: "luck", value: 1, text: "+1‚òòÔ∏è" }
                        ],
                        text: "+1ü™ô +1‚òòÔ∏è"
                    },
                    failure: { 
                        threshold: 11, 
                        effects: [
                            { type: "luck", value: -1, text: "-1‚òòÔ∏è" },
                            { type: "health", value: -1, text: "-1‚ù§Ô∏è" }
                        ],
                        text: "-1‚òòÔ∏è -1‚ù§Ô∏è"
                    },
                    special: {
                        condition: "triple",
                        effects: [
                            { type: "health", value: 1, text: "+1‚ù§Ô∏è" },
                            { type: "luck", value: 2, text: "+2‚òòÔ∏è" }
                        ],
                        text: "triple +1‚ù§Ô∏è and +2‚òòÔ∏è"
                    }
                }
            },
            {
                id: 5,
                title: "r2_5",
                illustration: "images/r2_5.png",
                text: "—Ç–µ–∫—Å—Ç",
                conditions: {
                    success: { 
                        threshold: 15, 
                        effects: [
                            { type: "luck", value: 1, text: "+1‚òòÔ∏è" },
                            { type: "gold", value: 1, text: "+1ü™ô" }
                        ],
                        text: "+1‚òòÔ∏è +1ü™ô"
                    },
                    failure: { 
                        threshold: 12, 
                        effects: [
                            { type: "gold", value: -1, text: "-1ü™ô" },
                            { type: "health", value: -1, text: "-1‚ù§Ô∏è" }
                        ],
                        text: "-1ü™ô -1‚ù§Ô∏è"
                    },
                    special: {
                        condition: "isSumEven",
                        value: 7,
                        effects: [
                            { type: "health", value: 1, text: "+1‚ù§Ô∏è" }
                        ],
                        text: "–¶—ñ–ª–µ +1‚ù§Ô∏è"
                    }
                }
            },
            {
                id: 6,
                title: "r2_6",
                illustration: "images/r2_6.png",
                text: "—Ç–µ–∫—Å—Ç",
                conditions: {
                    success: { 
                        threshold: 16, 
                        effects: [
                            { type: "luck", value: 1, text: "+1‚òòÔ∏è" },
                            { type: "health", value: 1, text: "+1‚ù§Ô∏è" }
                        ],
                        text: "+1‚òòÔ∏è +1‚ù§Ô∏è"
                    },
                    failure: { 
                        threshold: 13, 
                        effects: [
                            { type: "gold", value: -1, text: "-1ü™ô" },
                            { type: "luck", value: -1, text: "-1‚òòÔ∏è" }
                        ],
                        text: "-1ü™ô -1‚òòÔ∏è"
                    },
                    special: {
                        condition: "isSumEven",
                        value: 7,
                        effects: [
                            { type: "health", value: 1, text: "+1‚ù§Ô∏è" },
                            { type: "gold", value: 1, text: "+1ü™ô" }
                        ],
                        text: "–¶—ñ–ª–µ +1‚ù§Ô∏è, +1ü™ô"
                    }
                }
            }
        ],
        bosses: [
            {
                id: "r2_boss",
                title: "üíÄ–°–æ–Ω–Ω–∏–π –ö—Ç—É–ª—Ö—ÉüíÄ",
                illustration: "images/r2_boss1.png",
                text: "–ü–µ—Ä–µ–º–æ–∂–∏ –ö—Ç—É–ª—Ö—É —É –∫–∞–≤–æ–≤—ñ–π –±–∏—Ç–≤—ñ ‚Äî —ñ –∑–±–µ—Ä–µ–∂–µ—à —Ä–æ–∑—É–º; –ø—Ä–æ–≥—Ä–∞—î—à ‚Äî —ñ –ø—Ä–∏—î–¥–Ω–∞—î—à—Å—è –¥–æ –π–æ–≥–æ –∫—É–ª—å—Ç—É –Ω–∞–∑–∞–≤–∂–¥–∏.",
                conditions: {
                    success: { 
                        threshold: 18, 
                        effects: [
                            { type: "gold", value: 3, text: "+3ü™ô" },
                            { type: "health", value: 2, text: "+2‚ù§Ô∏è" }
                        ],
                        text: "+3ü™ô +2‚ù§Ô∏è"
                    },
                    failure: { 
                        threshold: 16, 
                        effects: [
                            { type: "health", value: -3, text: "-3‚ù§Ô∏è" },
                            { type: "gold", value: -2, text: "-2ü™ô" }
                        ],
                        text: "-3‚ù§Ô∏è -2ü™ô"
                    },
                    special: {
                        condition: "sequence",
                        effects: [
                            { type: "health", value: 1, text: "+1‚ù§Ô∏è" },
                            { type: "gold", value: 1, text: "+1ü™ô" }
                        ],
                        text: "Get a sequence +1‚ù§Ô∏è, +1ü™ô"
                    }
                }
            }
        ]
    },
    '–ö–æ—Å–º—ñ—á–Ω–∞ –ö–∞–≤\'—è—Ä–Ω—è': {
        quests: [
            {
                id: 1,
                title: "r3_1 The Chocolate Alchemist",
                illustration: "images/r3_1.png",
                text: "An alchemist seeks the perfect hot chocolate. Can you create magic in a cup?",
                conditions: {
                    success: { 
                        threshold: 17, 
                        effects: [
                            { type: "gold", value: 2, text: "+2ü™ô" },
                            { type: "luck", value: 1, text: "+1‚òòÔ∏è" }
                        ],
                        text: "+2ü™ô +1‚òòÔ∏è"
                    },
                    failure: { 
                        threshold: 13, 
                        effects: [
                            { type: "luck", value: -2, text: "-2‚òòÔ∏è" },
                            { type: "health", value: -1, text: "-1‚ù§Ô∏è" }
                        ],
                        text: "-2‚òòÔ∏è -1‚ù§Ô∏è"
                    },
                    special: { 
                        condition: "isSumEven",
                        value: 5,
                        effects: [
                            { type: "health", value: 2, text: "+2‚ù§Ô∏è" }
                        ],
                        text: "–¶—ñ–ª–µ +2‚ù§Ô∏è"
                    }
                }
            },
            {
                id: 2,
                title: "r3_2",
                illustration: "images/r3_2.png",
                text: "—Ç–µ–∫—Å—Ç",
                conditions: {
                    success: { 
                        threshold: 14, 
                        effects: [
                            { type: "gold", value: 2, text: "+2ü™ô" },
                            { type: "health", value: 1, text: "+1‚ù§Ô∏è" }
                        ],
                        text: "+2ü™ô +1‚ù§Ô∏è"
                    },
                    failure: { 
                        threshold: 12, 
                        effects: [
                            { type: "health", value: -1, text: "-1‚ù§Ô∏è" },
                            { type: "luck", value: -1, text: "-1‚òòÔ∏è" }
                        ],
                        text: "-1‚ù§Ô∏è -1‚òòÔ∏è"
                    },
                    special: {
                        condition: "allEven",
                        effects: [
                            { type: "luck", value: 1, text: "+1‚òòÔ∏è" },
                            { type: "health", value: 1, text: "+1‚ù§Ô∏è" }
                        ],
                        text: "All even numbers +1‚òòÔ∏è, +1‚ù§Ô∏è"
                    }
                }
            },
            {
                id: 3,
                title: "r3_3",
                illustration: "images/r_null.png",
                text: "—Ç–µ–∫—Å—Ç",
                conditions: {
                    success: { 
                        threshold: 15, 
                        effects: [
                            { type: "luck", value: 2, text: "+2‚òòÔ∏è" },
                            { type: "gold", value: 1, text: "+1ü™ô" }
                        ],
                        text: "+2‚òòÔ∏è +1ü™ô"
                    },
                    failure: { 
                        threshold: 12, 
                        effects: [
                            { type: "health", value: -2, text: "-2‚ù§Ô∏è" },
                            { type: "luck", value: -1, text: "-1‚òòÔ∏è" }
                        ],
                        text: "-2‚ù§Ô∏è -1‚òòÔ∏è"
                    },
                    special: {
                        condition: "sequence",
                        effects: [
                            { type: "gold", value: 2, text: "+2ü™ô" },
                            { type: "health", value: 1, text: "+1‚ù§Ô∏è" }
                        ],
                        text: "Get a sequence +2ü™ô and +1‚ù§Ô∏è"
                    }
                }
            },
            {
                id: 4,
                title: "r3_4",
                illustration: "images/r_null.png",
                text: "A translucent figure appears, requesting their 'usual'. What was their usual again?",
                conditions: {
                    success: { 
                        threshold: 13, 
                        effects: [
                            { type: "gold", value: 1, text: "+1ü™ô" },
                            { type: "luck", value: 1, text: "+1‚òòÔ∏è" }
                        ],
                        text: "+1ü™ô +1‚òòÔ∏è"
                    },
                    failure: { 
                        threshold: 11, 
                        effects: [
                            { type: "luck", value: -1, text: "-1‚òòÔ∏è" },
                            { type: "health", value: -1, text: "-1‚ù§Ô∏è" }
                        ],
                        text: "-1‚òòÔ∏è -1‚ù§Ô∏è"
                    },
                    special: {
                        condition: "triple",
                        effects: [
                            { type: "health", value: 1, text: "+1‚ù§Ô∏è" },
                            { type: "luck", value: 2, text: "+2‚òòÔ∏è" }
                        ],
                        text: "triple +1‚ù§Ô∏è and +2‚òòÔ∏è"
                    }
                }
            },
            {
                id: 5,
                title: "r3_5",
                illustration: "images/r_null.png",
                text: "—Ç–µ–∫—Å—Ç",
                conditions: {
                    success: { 
                        threshold: 16, 
                        effects: [
                            { type: "luck", value: 1, text: "+1‚òòÔ∏è" },
                            { type: "gold", value: 1, text: "+1ü™ô" }
                        ],
                        text: "+1‚òòÔ∏è +1ü™ô"
                    },
                    failure: { 
                        threshold: 14, 
                        effects: [
                            { type: "gold", value: -1, text: "-1ü™ô" },
                            { type: "health", value: -1, text: "-1‚ù§Ô∏è" }
                        ],
                        text: "-1ü™ô -1‚ù§Ô∏è"
                    },
                    special: {
                        condition: "isSumEven",
                        value: 7,
                        effects: [
                            { type: "health", value: 1, text: "+1‚ù§Ô∏è" }
                        ],
                        text: "–¶—ñ–ª–µ +1‚ù§Ô∏è"
                    }
                }
            },
            {
                id: 6,
                title: "r3_6",
                illustration: "images/r_null.png",
                text: "—Ç–µ–∫—Å—Ç",
                conditions: {
                    success: { 
                        threshold: 16, 
                        effects: [
                            { type: "luck", value: 1, text: "+1‚òòÔ∏è" },
                            { type: "health", value: 1, text: "+1‚ù§Ô∏è" }
                        ],
                        text: "+1‚òòÔ∏è +1‚ù§Ô∏è"
                    },
                    failure: { 
                        threshold: 13, 
                        effects: [
                            { type: "gold", value: -1, text: "-1ü™ô" },
                            { type: "luck", value: -1, text: "-1‚òòÔ∏è" }
                        ],
                        text: "-1ü™ô -1‚òòÔ∏è"
                    },
                    special: {
                        condition: "isSumEven",
                        value: 7,
                        effects: [
                            { type: "health", value: 1, text: "+1‚ù§Ô∏è" }
                        ],
                        text: "–¶—ñ–ª–µ +1‚ù§Ô∏è"
                    }
                }
            }
        ],
        bosses: [
            {
                id: "r3_boss",
                title: "üíÄThe Chocolate TitanüíÄ",
                illustration: "images/r_null.png",
                text: "A colossal being made of molten chocolate challenges you to create the ultimate dessert drink!",
                conditions: {
                    success: { 
                        threshold: 21, 
                        effects: [
                            { type: "luck", value: 4, text: "+4‚òòÔ∏è" },
                            { type: "gold", value: 3, text: "+3ü™ô" }
                        ],
                        text: "+4‚òòÔ∏è +3ü™ô"
                    },
                    failure: { 
                        threshold: 19, 
                        effects: [
                            { type: "health", value: -4, text: "-4‚ù§Ô∏è" },
                            { type: "luck", value: -2, text: "-2‚òòÔ∏è" }
                        ],
                        text: "-4‚ù§Ô∏è -2‚òòÔ∏è"
                    },
                    special: {
                        condition: "triple",
                        effects: [
                            { type: "health", value: 4, text: "+4‚ù§Ô∏è" },
                            { type: "gold", value: 4, text: "+4ü™ô" },
                            { type: "luck", value: 4, text: "+4‚òòÔ∏è" }
                        ],
                        text: "Triple +4‚ù§Ô∏è +4ü™ô +4‚òòÔ∏è"
                    }
                }
            }
        ]
    }
};

// Special condition checkers
const conditionCheckers = {
    // Check if there are at least two dice with the same value
    pair: (dice) => {
        const counts = new Map();
        dice.forEach(value => counts.set(value, (counts.get(value) || 0) + 1));
        return Array.from(counts.values()).some(count => count >= 2);
    },

    // Check if there are three dice with the same value
    triple: (dice) => {
        const counts = new Map();
        dice.forEach(value => counts.set(value, (counts.get(value) || 0) + 1));
        return Array.from(counts.values()).some(count => count === 3);
    },
    
    // Check if all dice values are even    
    allEven: (dice) => dice.every(value => value % 2 === 0),
    
    sequence: (dice) => {
        const sorted = [...dice].sort((a, b) => a - b);
        for (let i = 1; i < sorted.length; i++) {
            if (sorted[i] !== sorted[i-1] + 1) return false;
        }
        return true;
    },
    
    // Check if all dice values are the same
    allSame: (dice) => dice.every(value => value === dice[0]),
    
    // Check if the sum of dice values is even
    isSumEven: (dice) => dice.reduce((sum, die) => sum + die, 0) % 2 === 0,
    
    // Check if the sum of dice values is odd
    isSumOdd: (dice) => dice.reduce((sum, die) => sum + die, 0) % 2 === 1
}; 